{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAOC,SAASC,cAAc,QAC9BC,EAAW,GAGjB,SAASC,EAAcC,EAAUC,GACf,IAAIC,SAAQ,CAACC,EAASC,KACdC,KAAKC,SAAW,GAEpCH,EAAQ,uBAAqBH,QAAiBC,OAG5CG,EAAO,sBAAoBJ,QAAeC,MAAU,IAGlDM,MAAKC,IACTC,EAAAhB,GAASiB,OAAOC,QAAQH,EAAO,IAEjCI,IACAH,EAAAhB,GAASiB,OAAOG,QAAQD,EAAM,G,CAuClCjB,EAAKmB,iBAAiB,UAlCtB,SAAgBC,GACdA,EAAEC,iBAEF,MAAMC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,aACjD,IAAIrB,EAAW,EAEfsB,YAAW,KACT,GAAIL,EAASM,OAAS,EACpB,OAIF,GADAxB,EAAcC,EAAUiB,EAAShB,OAC7BgB,EAASM,OAAS,EACpB,OAGF,MAAMC,EAAaC,aAAY,KAC7BzB,IAEAD,EAAcC,EAAUiB,EAASS,MAE7BT,EAASM,SAAWvB,GACtB2B,cAAcH,EAAW,GAE1B1B,EAAS4B,KAAK,GAChB5B,EAASG,M,IAUdN,EAAKmB,iBAAiB,SAPtB,SAAuBC,GACrBjB,EAASiB,EAAEa,OAAOC,MAAQd,EAAEa,OAAOE,MAEnCV,aAAaW,QAAQ,WAAYb,KAAKc,UAAUlC,G","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst form = document.querySelector(\"form\");\nconst formData = {};\n\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((resolve, rejected) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      resolve(`✅ Fulfilled promise ${position} in ${delay}ms`)\n    } else\n    {\n      rejected(`❌ Rejected promise ${position} in ${delay}ms`)\n    }\n  })\n  promise.then(result => {\n      Notiflix.Notify.success(result);\n  },\n    error => {\n    Notiflix.Notify.failure(error);\n    }\n  );\n};\n\nfunction submit(e) {\n  e.preventDefault();\n\n  const getItems = JSON.parse(localStorage.getItem('formData'));\n  let position = 1;\n\n  setTimeout(() => {\n    if (getItems.amount < 1) {\n      return\n    }\n\n    createPromise(position, getItems.delay);\n    if (getItems.amount < 1) {\n      return\n    }\n\n    const intervalId = setInterval(() => {\n      position ++;\n\n      createPromise(position, getItems.step);\n\n      if (getItems.amount === position) {\n        clearInterval(intervalId);\n      }\n    }, formData.step);\n  }, formData.delay);\n}\n\nfunction onInputCreate(e) {\n  formData[e.target.name] = e.target.value;\n\n  localStorage.setItem('formData', JSON.stringify(formData));\n};\n\nform.addEventListener('submit', submit);\nform.addEventListener('input', onInputCreate);"],"names":["$7Y9D8","parcelRequire","$47d4ff9957288465$var$form","document","querySelector","$47d4ff9957288465$var$formData","$47d4ff9957288465$var$createPromise","position","delay","Promise","resolve","rejected","Math","random","then","result","$parcel$interopDefault","Notify","success","error","failure","addEventListener","e","preventDefault","getItems","JSON","parse","localStorage","getItem","setTimeout","amount","intervalId","setInterval","step","clearInterval","target","name","value","setItem","stringify"],"version":3,"file":"03-promises.6a99b787.js.map"}