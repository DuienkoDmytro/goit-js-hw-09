{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAOC,SAASC,cAAc,QAC9BC,EAAW,GAGjB,SAASC,EAAcC,EAAUC,GACf,IAAIC,SAAQ,SAACC,EAASC,GACdC,KAAKC,SAAW,GAEpCH,EAAQ,uBAAwCI,OAAfP,EAAS,QAAYO,OAANN,EAAM,OAGpDG,EAAO,sBAAqCG,OAAfP,EAAS,QAAYO,OAANN,EAAM,M,IAGhDO,MAAK,SAAAC,GACTC,EAAAjB,GAASkB,OAAOC,QAAQH,E,IAE1B,SAAAI,GACAH,EAAAjB,GAASkB,OAAOG,QAAQD,E,IAuC5BlB,EAAKoB,iBAAiB,UAlCtB,SAAgBC,GACdA,EAAEC,iBAEF,IAAMC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,aAC7CtB,EAAW,EAEfuB,YAAW,WACT,KAAIL,EAASM,OAAS,IAItBzB,EAAcC,EAAUkB,EAASjB,OAC7BiB,EAASM,OAAS,IAItB,IAAMC,EAAaC,aAAY,WAG7B3B,IAFAC,EAEwBkB,EAASS,MAE7BT,EAASM,SAAWxB,GACtB4B,cAAcH,E,GAEf3B,EAAS6B,K,GACX7B,EAASG,M,IAUdN,EAAKoB,iBAAiB,SAPtB,SAAuBC,GACrBlB,EAASkB,EAAEa,OAAOC,MAAQd,EAAEa,OAAOE,MAEnCV,aAAaW,QAAQ,WAAYb,KAAKc,UAAUnC,G","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst form = document.querySelector(\"form\");\nconst formData = {};\n\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((resolve, rejected) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      resolve(`✅ Fulfilled promise ${position} in ${delay}ms`)\n    } else\n    {\n      rejected(`❌ Rejected promise ${position} in ${delay}ms`)\n    }\n  })\n  promise.then(result => {\n      Notiflix.Notify.success(result);\n  },\n    error => {\n    Notiflix.Notify.failure(error);\n    }\n  );\n};\n\nfunction submit(e) {\n  e.preventDefault();\n\n  const getItems = JSON.parse(localStorage.getItem('formData'));\n  let position = 1;\n\n  setTimeout(() => {\n    if (getItems.amount < 1) {\n      return\n    }\n\n    createPromise(position, getItems.delay);\n    if (getItems.amount < 1) {\n      return\n    }\n\n    const intervalId = setInterval(() => {\n      position ++;\n\n      createPromise(position, getItems.step);\n\n      if (getItems.amount === position) {\n        clearInterval(intervalId);\n      }\n    }, formData.step);\n  }, formData.delay);\n}\n\nfunction onInputCreate(e) {\n  formData[e.target.name] = e.target.value;\n\n  localStorage.setItem('formData', JSON.stringify(formData));\n};\n\nform.addEventListener('submit', submit);\nform.addEventListener('input', onInputCreate);"],"names":["$6JpON","parcelRequire","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$formData","$ce04d3a99e08e73b$var$createPromise","position","delay","Promise","resolve","rejected","Math","random","concat","then","result","$parcel$interopDefault","Notify","success","error","failure","addEventListener","e","preventDefault","getItems","JSON","parse","localStorage","getItem","setTimeout","amount","intervalId","setInterval","step","clearInterval","target","name","value","setItem","stringify"],"version":3,"file":"03-promises.169bfc09.js.map"}